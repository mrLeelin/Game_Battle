# 优化：抢球大战后退动画

## 变更日期
2026-01-30

## 变更类型
optimize: 动画与控制优化

## 变更内容

### 移动与朝向解耦
1. **取消强制朝向**：移除了角色移动时自动转向移动方向的逻辑。现在的角色朝向完全由鼠标位置（PC端）或输入控制决定，实现了"移动"与"瞄准"的分离（Strafe mechanics）。
2. **支持后退移动**：允许角色在保持面向前方的情况下向后移动。

### 后退动画实现
1. **方向检测**：实时计算移动方向与角色朝向的夹角。当夹角大于 135 度时，判定为"后退"状态。
2. **倒放动画**：
    - **腿部**：在后退时反转跑步动画的相位（`walkPhase` 递减），模拟倒退步伐。
    - **身体姿态**：
        - 前进时：身体前倾 (0.2 弧度)。
        - 后退时：身体微后倾或保持直立 (-0.1 弧度)，符合倒退时的重心变化。

## 修改文件

### client/games/ballgame/
- `BallGameScene.js`:
  - 修改 `updatePlayerAnimations` 方法。
  - 移除了 `player.rotation.y` 的自动更新逻辑。
  - 增加了 `isMovingBackward` 检测逻辑。
  - 根据移动方向调整动画相位和身体倾斜角度。

## 效果
- 提升了操作上限，玩家可以在后退拉扯的同时进行瞄准和投掷。
- 视觉表现更自然，不再出现向后移动时角色瞬间掉头的情况。
